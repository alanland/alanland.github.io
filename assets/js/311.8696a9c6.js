(window.webpackJsonp=window.webpackJsonp||[]).push([[311],{1026:function(s,a,t){"use strict";t.r(a);var e=t(6),r=Object(e.a)({},(function(){var s=this,a=s.$createElement,t=s._self._c||a;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h2",{attrs:{id:"查看进程"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#查看进程"}},[s._v("#")]),s._v(" 查看进程")]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("ps")]),s._v(" aux "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("grep")]),s._v(" tomcat\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("h2",{attrs:{id:"查看线程状态"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#查看线程状态"}},[s._v("#")]),s._v(" 查看线程状态")]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("ps")]),s._v(" -T -p "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$PID")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("wc")]),s._v(" -l\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("ps")]),s._v(" -Lf "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$PID")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("wc")]),s._v(" -l \n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("h2",{attrs:{id:"查看连接"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#查看连接"}},[s._v("#")]),s._v(" 查看连接")]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 连接数")]),s._v("\nss -ltp "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("grep")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$PID")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("wc")]),s._v(" -l\nss -stp "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("grep")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$PID")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("wc")]),s._v(" -l\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 连接时间")]),s._v("\nss -tn -o\nss -stpn -o "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("grep")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$PID")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 根据第一列排序")]),s._v("\nss -stpn -o "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("grep")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$PID")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sort")]),s._v(" -t1\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Display Currently Established, Closed, Orphaned and Waiting TCP sockets")]),s._v("\nss -s\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("netstat")]),s._v(" -s\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Display All Open Network Ports")]),s._v("\nss -l\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("netstat")]),s._v(" -tulpn\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Display All TCP Sockets")]),s._v("\nss -t -a\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("netstat")]),s._v(" -nat\n\n\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br"),t("span",{staticClass:"line-number"},[s._v("23")]),t("br")])]),t("h2",{attrs:{id:"内存"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#内存"}},[s._v("#")]),s._v(" 内存")]),s._v(" "),t("h3",{attrs:{id:"linux-内存"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#linux-内存"}},[s._v("#")]),s._v(" Linux 内存")]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[s._v("pmap -x/d/X "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$PID")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("ul",[t("li",[s._v("Address: 内存开始地址")]),s._v(" "),t("li",[s._v("Kbytes: 占用内存的字节数（KB）")]),s._v(" "),t("li",[s._v("RSS: 保留内存的字节数（KB）")]),s._v(" "),t("li",[s._v("Dirty: 脏页的字节数（包括共享和私有的）（KB）")]),s._v(" "),t("li",[s._v("Mode: 内存的权限：read、write、execute、shared、private (写时复制)")]),s._v(" "),t("li",[s._v("Mapping: 占用内存的文件、或[anon]（分配的内存）、或[stack]（堆栈）")]),s._v(" "),t("li",[s._v("Offset: 文件偏移")]),s._v(" "),t("li",[s._v("Device: 设备名 (major:minor)")])]),s._v(" "),t("h3",{attrs:{id:"jvm堆外内存分析-nmt-native-memory-tracking"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#jvm堆外内存分析-nmt-native-memory-tracking"}},[s._v("#")]),s._v(" JVM堆外内存分析 NMT(native memory tracking)")]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# -XX:NativeMemoryTracking=[off | summary | detail]")]),s._v("\n-XX:NativeMemoryTracking"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("detail\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("h3",{attrs:{id:"jcmd"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#jcmd"}},[s._v("#")]),s._v(" jcmd")]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 列出所有支持的命令    ")]),s._v("\njcmd "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$PID")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("help")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# jcmd pid VM.native_memory [summary | detail | baseline | summary.diff | detail.diff | shutdown] [scale= KB | MB | GB]")]),s._v("\n jcmd pid VM.native_memory detail\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("h2",{attrs:{id:"两种内存溢出"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#两种内存溢出"}},[s._v("#")]),s._v(" 两种内存溢出")]),s._v(" "),t("h3",{attrs:{id:"java-lang-outofmemoryerror-java-heap-space"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#java-lang-outofmemoryerror-java-heap-space"}},[s._v("#")]),s._v(" java.lang.OutOfMemoryError: Java heap space")]),s._v(" "),t("h3",{attrs:{id:"java-lang-outofmemoryerror-native-memory-exhausted"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#java-lang-outofmemoryerror-native-memory-exhausted"}},[s._v("#")]),s._v(" java.lang.OutOfMemoryError: native memory exhausted")]),s._v(" "),t("p",[s._v("The best answer comes from an article written a while back explaining the memory layout of the JVM: Thanks for the Memory")]),s._v(" "),t("p",[s._v("A good thing to understand about native outofmemory is that the underlying cause is not easily understood from any of the regular debug methods (heapdumps, system core files). More recent versions of the JVM do produce javacores that contain some insight into the most common of the native memory culprits (DBBs, classloader,too large Xmx value). However one should expect to have to rule out the most common causes first and then seek more invasive native memory tracing in an iterative process of finding the trigger.")]),s._v(" "),t("p",[s._v('Start with the "Thanks for the Memory" article to understand the JVM memory model. If java.lang.OutOfMemoryError: Java heap space is the problem, then use the MAT tool to investigate a heapdump that was produced by the OutOfMemory (OOM). If java.lang.OutOfMemoryError: native memory exhausted is the problem, first check that there are adequate resources for your application serving environment. Check the '),t("a",{attrs:{href:"http://www-01.ibm.com/support/docview.wss?uid=swg21469413",target:"_blank",rel:"noopener noreferrer"}},[s._v("ulimits"),t("OutboundLink")],1),s._v(". Then check the NATIVEMEMINFO section of a javacore created from a NOOM and determine the largest native memory consumers. Then determine which components may contribute to this native memory.")]),s._v(" "),t("p",[s._v("Additional troubleshooting steps: "),t("a",{attrs:{href:"http://www-01.ibm.com/support/docview.wss?uid=swg21373312",target:"_blank",rel:"noopener noreferrer"}},[s._v("Troubleshooting native memory issues"),t("OutboundLink")],1)])])}),[],!1,null,null,null);a.default=r.exports}}]);