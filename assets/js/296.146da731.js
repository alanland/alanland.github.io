(window.webpackJsonp=window.webpackJsonp||[]).push([[296],{1011:function(p,v,_){"use strict";_.r(v);var e=_(6),s=Object(e.a)({},(function(){var p=this,v=p.$createElement,_=p._self._c||v;return _("ContentSlotsDistributor",{attrs:{"slot-key":p.$parent.slotKey}},[_("p",[p._v("-bash: fork: retry: Resource temporarily unavailable")]),p._v(" "),_("p",[p._v("1、总结系统限制有：")]),p._v(" "),_("p",[p._v("/proc/sys/kernel/pid_max #查系统支持的最大线程数，一般会很大，相当于理论值")]),p._v(" "),_("p",[p._v("/proc/sys/kernel/thread-max")]),p._v(" "),_("p",[p._v("max_user_process（ulimit -u） #系统限制某用户下最多可以运行多少进程或线程")]),p._v(" "),_("p",[p._v("/proc/sys/vm/max_map_count")]),p._v(" "),_("p",[p._v("硬件内存大小")]),p._v(" "),_("p",[p._v("2、Java虚拟机本身限制：")]),p._v(" "),_("p",[p._v("-Xms  #intial java heap size")]),p._v(" "),_("p",[p._v("-Xmx  #maximum java heap size")]),p._v(" "),_("p",[p._v("-Xss  #the stack size for each thread")]),p._v(" "),_("p",[p._v("3、查询当前某程序的线程或进程数")]),p._v(" "),_("p",[p._v("pstree -p "),_("code",[p._v("ps -e | grep java | awk '{print $1}'")]),p._v(" | wc -l")]),p._v(" "),_("p",[p._v("或")]),p._v(" "),_("p",[p._v("pstree -p 3660 | wc -l")]),p._v(" "),_("p",[p._v("或")]),p._v(" "),_("h1",{attrs:{id:"pstack-pid-grep-lwp-wc-l"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#pstack-pid-grep-lwp-wc-l"}},[p._v("#")]),p._v(" pstack pid |grep LWP |wc -l")]),p._v(" "),_("p",[p._v("4、查询当前整个系统已用的线程或进程数")]),p._v(" "),_("p",[p._v("pstree -p | wc -l")]),p._v(" "),_("p",[p._v("1、 cat /proc/${pid}/status")]),p._v(" "),_("p",[p._v("2、pstree -p ${pid}")]),p._v(" "),_("p",[p._v("3、top -p ${pid} 再按H  或者直接输入 top -bH -d 3 -p  ${pid}")]),p._v(" "),_("p",[p._v("top -H")]),p._v(" "),_("p",[p._v("手册中说：-H : Threads toggle")]),p._v(" "),_("p",[p._v("加上这个选项启动top，top一行显示一个线程。否则，它一行显示一个进程。")]),p._v(" "),_("p",[p._v("4、ps xH")]),p._v(" "),_("p",[p._v("手册中说：H Show threads as if they were processes")]),p._v(" "),_("p",[p._v("这样可以查看所有存在的线程。")]),p._v(" "),_("p",[p._v("5、ps -mp "),_("PID")],1),p._v(" "),_("p",[p._v("手册中说：m Show threads after processes")]),p._v(" "),_("p",[p._v("这样可以查看一个进程起的线程数。")])])}),[],!1,null,null,null);v.default=s.exports}}]);